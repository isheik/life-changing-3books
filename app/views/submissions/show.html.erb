<div class="max-w-4xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-8 text-center">私の人生を変えた3冊</h1>

  <% if @submission.comment.present? %>
    <div class="bg-blue-50 rounded-lg p-8 mb-12 shadow-sm">
      <h2 class="text-xl font-bold mb-4 text-blue-900">コメント</h2>
      <p class="text-gray-700 leading-relaxed"><%= simple_format(@submission.comment) %></p>
    </div>
  <% end %>

  <div class="grid md:grid-cols-3 gap-8">
    <% @submission.submission_books.order(:book_order).each do |book| %>
      <div class="relative border rounded-lg p-4 bg-white shadow-sm transform transition hover:shadow-md duration-150">
        <!-- 順番を表示 -->
        <div class="absolute -top-3 -left-3 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold shadow-sm">
          <%= book.book_order %>
        </div>

        <div class="aspect-w-2 aspect-h-3 mb-4 bg-gray-100 rounded overflow-hidden">
          <% if book.cover_url.present? %>
            <%= image_tag book.cover_url,
                         class: "object-cover w-full h-full hover:opacity-90 transition duration-150",
                         alt: book.title %>
          <% else %>
            <div class="w-full h-full flex items-center justify-center">
              <span class="text-gray-400 text-sm">表紙なし</span>
            </div>
          <% end %>
        </div>
        <h3 class="font-bold text-lg mb-2 line-clamp-2"><%= book.title %></h3>
        <p class="text-gray-600 text-sm"><%= book.author %></p>
      </div>
    <% end %>
  </div>

  <div class="mt-12 text-center space-y-4">
    <!-- SNSシェアボタン -->
    <div class="flex justify-center space-x-4">
      <% share_text = "私の人生を変えた3冊 #3books-changed-me" %>
      <% share_url = submission_url(@submission) %>
      
      <%= link_to "https://twitter.com/intent/tweet?text=#{CGI.escape(share_text)}&url=#{CGI.escape(share_url)}",
          target: "_blank",
          class: "bg-[#1DA1F2] text-white px-6 py-2 rounded-full inline-flex items-center hover:bg-[#1a90da]" do %>
        X（Twitter）でシェア
      <% end %>

      <%= link_to "https://www.facebook.com/sharer/sharer.php?u=#{CGI.escape(share_url)}",
          target: "_blank",
          class: "bg-[#4267B2] text-white px-6 py-2 rounded-full inline-flex items-center hover:bg-[#365899]" do %>
        Facebookでシェア
      <% end %>
    </div>

    <%= link_to "新しい投稿を作成", root_path, class: "text-blue-600 hover:text-blue-800 inline-block" %>
  </div>
</div>
